<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
    <title>Flask API Form</title>
    <script>
        function submitData(event) {
            event.preventDefault();

            var passage = document.getElementById('passage').value;
            var question = document.getElementById('question').value;
            var answer = document.getElementById('answer').value;
            var questionid = document.getElementById("questionSelect").value;

            fetch('http://127.0.0.1:5000/get_txt', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ passage: passage, question: question, answer: answer, questionid: questionid })
        })
            .then(response => {
                // Log the response here
                console.log(response);
                return response.json();
            })
            .then(data => {
                document.getElementById('response').textContent = JSON.stringify(data, null, 2);
                // jd = JSON.stringify(data, null, 2);
                jsonData = JSON.parse(JSON.stringify(data, null, 2));
            })
            .catch(error => console.error('Error:', error));

        }
    </script>
</head>
<body class="bg-light">
    <div class="container">

    <div class="py-5 text-center">
        <img class="d-block mx-auto mb-4" src="moochi.png" alt="" width="200">
        <h2>MOOCHI (Test)</h2>
        <p class="lead">An advanced AI-driven educational tool revolutionizing the exam evaluation experience.</p>
    </div>
    
    <form id="dataForm" onsubmit="submitData(event)">

        <select id="passageSelect" name="passagee" class="form-control">
            <option value="default">Select a passage</option>
            <option value="media">English SSC-1 2022 Q2</option>
            <option value="test">Test</option>
        </select>
          
        <div>
            <label for="passage">Passage</label><br>
            <textarea id="passage" name="passage" class="form-control" rows="4" cols="150" required></textarea>
        </div>
        <div>
            <label for="question">Question</label><br>
            <select id="questionSelect" class="form-control">
                <option value="default">Select question</option>
                <option value="i">Write down the summary of the passage. Also suggest a suitable title.</option>
                <option value="ii">How has media attracted the attention of a large number of audience?</option>
                <option value="iii">Do you agree that media has become part of our life? Explain your answer.</option>
            </select>
            <!-- <input type="text" id="question" name="question" placeholder="Enter question" size="150" value="How has media attracted the attention of a large number of audience?"> -->
            <br>
            <textarea id="question" style="display:none;" name="question" class="form-control" rows="1" cols="150"></textarea>
        </div>
        <div>
            <label for="answer">Answer</label><br>
            <textarea type="text" id="answer" name="answer" class="form-control" rows="3" cols="150"></textarea>
            <!-- <input type="text" id="answer" name="answer" placeholder="Enter answer" size="150" value="Media attracts a large audience by sharing knowledge, expressing feelings and opinions, and raising awareness about social issues. It has become an integral part of people's lives, keeping them informed and connected through various channels such as television, radio, print, and digital platforms. Media makes it possible for people to access news and entertainment from anywhere in the world."> -->
        </div>
        <br>
        <button type="submit" class="btn btn-primary btn-sm">Submit</button>

        
        <!-- Trigger the modal with a button -->
  <button type="button" onclick="openModal()" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal">test popup</button>


  <!-- <button onclick="openModal()">Open Modal</button> -->


  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Score</h4>
        </div>
        <div class="modal-body">
            <h2>Total Marks: <span id="totalMarks"></span></h2>
            <h3>Feedback</h3>
            <p id="feedback">feedback here</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
</div>




    </form>
    <h2>Response</h2>
    <pre id="response"></pre>
<!-- </div> -->
</div>

    <script>
        function fillpassageTextarea() {
        var select = document.getElementById("passageSelect");
        var textarea = document.getElementById("passage");

        var selectedPassage = select.value;

        if (selectedPassage === "media") {
            textarea.value = "Media helps people to share knowledge of the world, their feelings and opinions are expressed through it. Media attracts the attention of a very large audience. It is through media that the world has become a global village. Media plays a very constructive role for the society. It raises awareness about many social issues like corruption, terrorism, drug addiction and violation of human rights. Media has become a mouthpiece of the downtrodden. It would not be wrong to say that media is the most vigilant institution that keeps an eye on every segment of the society. Through debates, reports and talk shows it makes everyone accountable and answerable. This is why media has become an integral part of our lives. Media can play a positive role and has a corrective impact if it works honestly.";
        } else if (selectedPassage === "test") {
            textarea.value = "This is the test text for passage 2.";
        } else {
            textarea.value = ""; // Reset textarea if default option is selected
        }
        }

        function fillquestionTextarea() {
        var select = document.getElementById("questionSelect");
        var qtextarea = document.getElementById("question");
        var atextarea = document.getElementById("answer");

        var selectedPassage = select.value;

        if (selectedPassage === "i") {
            qtextarea.value = "Write down the summary of the passage. Also suggest a suitable title.";
            atextarea.value = "Title: The Constructive Role of Media in Society. Summary: The media serves as a means for people to share their knowledge, feelings, and opinions with a large audience. It has helped the world become a global village and plays a crucial role in raising awareness about social issues such as corruption, terrorism, drug addiction, and human rights violations. The media also serves as a voice for the disadvantaged and keeps a watchful eye on all aspects of society, making everyone accountable through debates, reports, and talk shows. Thus, media has become an essential part of our lives and has the potential to make a positive impact if it functions honestly"
        } else if (selectedPassage === "ii") {
            qtextarea.value = "How has media attracted the attention of a large number of audience?";
            atextarea.value = "Media attracts a large audience by sharing knowledge, expressing feelings and opinions, and raising awareness about social issues. It has become an integral part of people's lives, keeping them informed and connected through various channels such as television, radio, print, and digital platforms. Media makes it possible for people to access news and entertainment from anywhere in the world."
        } else if (selectedPassage === "iii") {
            qtextarea.value = "Do you agree that media has become part of our life? Explain your answer.";
            atextarea.value = "It is evident that media has become an integral part of our lives. Media has the ability to connect people across the world, provide access to information, and create a platform for expression of opinions and ideas. In today's digital age, people rely heavily on various forms of media to stay informed, entertained, and connected with the world. From social media platforms to traditional news outlets, media has become a constant presence in our daily lives, shaping our perspectives and influencing our actions."
        } else {
            qtextarea.value = ""; // Reset textarea if default option is selected
        }
        }


        // Add event listener to the passage dropdown menu
        document.getElementById("passageSelect").addEventListener("change", fillpassageTextarea);
        document.getElementById("questionSelect").addEventListener("change", fillquestionTextarea);
        
        // Call fillTextarea function initially to set the initial state of textarea
        fillquestionTextarea();
        fillpassageTextarea();

       
        // Function to open the modal and populate its content
        function openModal() {
        //   var modal = document.getElementById("myModal");
          var totalMarksSpan = document.getElementById("totalMarks");
          var feedbackParagraph = document.getElementById("feedback");
        
          // Populate modal content with data from JSON
          totalMarksSpan.textContent = jsonData["total_marks"]
          feedbackParagraph.textContent = jsonData.model_response["Criteria 1"].Feedback;
                
        }
    
    </script>

    
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


</body>
</html>
